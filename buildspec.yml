version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 18
  commands:
    - echo "Installing dependencies if any"

build:
  commands:
    - echo "Preparing files for deployment..."

# Copy all files from src/ to a temporary build folder
- mkdir build
- cp -r src/* build/

# Deploy to S3 with auto-detected MIME types and public read
- aws s3 sync build/ s3://find-me-2.1/ --delete --acl public-read --exact-timestamps

# Invalidate CloudFront cache so changes appear immediately
- aws cloudfront create-invalidation --distribution-id "E53TEA4J2CIO0" --paths "/*"

artifacts:
  files: []
